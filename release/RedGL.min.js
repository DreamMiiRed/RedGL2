var RedGLUtil,RedGL,RedBaseContainer,RedBaseObject3D,RedBuffer,RedGeometry,RedMaterial,RedColorMaterial,RedBitmapMaterial,RedMesh,RedProgram,RedSystemShaderCode,RedShader,RedRenderer,RedBitmapTexture,RedView,RedWorld,RedScene,RedCamera;!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t},e.toRadian=function(t){return t*a},e.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))};var n=e.EPSILON=1e-6,a=(e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random,Math.PI/180)},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],s=e[6],h=e[7],f=e[8],d=r[0],l=r[1],R=r[2],M=r[3],m=r[4],v=r[5],p=r[6],E=r[7],b=r[8];return t[0]=d*n+l*o+R*s,t[1]=d*a+l*u+R*h,t[2]=d*i+l*c+R*f,t[3]=M*n+m*o+v*s,t[4]=M*a+m*u+v*h,t[5]=M*i+m*c+v*f,t[6]=p*n+E*o+b*s,t[7]=p*a+E*u+b*h,t[8]=p*i+E*c+b*f,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new i.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,r,n,a,o,u,c,s){var h=new i.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=a,h[5]=o,h[6]=u,h[7]=c,h[8]=s,h},e.set=function(t,e,r,n,a,i,o,u,c,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=u,t[7]=c,t[8]=s,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],c=e[6],s=e[7],h=e[8],f=h*o-u*s,d=-h*i+u*c,l=s*i-o*c,R=r*f+n*d+a*l;return R?(R=1/R,t[0]=f*R,t[1]=(-h*n+a*s)*R,t[2]=(u*n-a*o)*R,t[3]=d*R,t[4]=(h*r-a*c)*R,t[5]=(-u*r+a*i)*R,t[6]=l*R,t[7]=(-s*r+n*c)*R,t[8]=(o*r-n*i)*R,t):null},e.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],c=e[6],s=e[7],h=e[8];return t[0]=o*h-u*s,t[1]=a*s-n*h,t[2]=n*u-a*o,t[3]=u*c-i*h,t[4]=r*h-a*c,t[5]=a*i-r*u,t[6]=i*s-o*c,t[7]=n*c-r*s,t[8]=r*o-n*i,t},e.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],u=t[6],c=t[7],s=t[8];return e*(s*i-o*c)+r*(-s*a+o*u)+n*(c*a-i*u)},e.multiply=n,e.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],s=e[6],h=e[7],f=e[8],d=r[0],l=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=u,t[5]=c,t[6]=d*n+l*o+s,t[7]=d*a+l*u+h,t[8]=d*i+l*c+f,t},e.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],s=e[6],h=e[7],f=e[8],d=Math.sin(r),l=Math.cos(r);return t[0]=l*n+d*o,t[1]=l*a+d*u,t[2]=l*i+d*c,t[3]=l*o-d*n,t[4]=l*u-d*a,t[5]=l*c-d*i,t[6]=s,t[7]=h,t[8]=f,t},e.scale=function(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,u=n+n,c=a+a,s=r*o,h=n*o,f=n*u,d=a*o,l=a*u,R=a*c,M=i*o,m=i*u,v=i*c;return t[0]=1-f-R,t[3]=h-v,t[6]=d+m,t[1]=h+v,t[4]=1-s-R,t[7]=l-M,t[2]=d-m,t[5]=l+M,t[8]=1-s-f,t},e.normalFromMat4=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],c=e[6],s=e[7],h=e[8],f=e[9],d=e[10],l=e[11],R=e[12],M=e[13],m=e[14],v=e[15],p=r*u-n*o,E=r*c-a*o,b=r*s-i*o,g=n*c-a*u,U=n*s-i*u,A=a*s-i*c,_=h*M-f*R,y=h*m-d*R,L=h*v-l*R,T=f*m-d*M,S=f*v-l*M,w=d*v-l*m,I=p*w-E*S+b*T+g*L-U*y+A*_;return I?(I=1/I,t[0]=(u*w-c*S+s*T)*I,t[1]=(c*L-o*w-s*y)*I,t[2]=(o*S-u*L+s*_)*I,t[3]=(a*S-n*w-i*T)*I,t[4]=(r*w-a*L+i*y)*I,t[5]=(n*L-r*S-i*_)*I,t[6]=(M*A-m*U+v*g)*I,t[7]=(m*b-R*A-v*E)*I,t[8]=(R*U-M*b+v*p)*I,t):null},e.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},e.subtract=a,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],u=t[4],c=t[5],s=t[6],h=t[7],f=t[8],d=e[0],l=e[1],R=e[2],M=e[3],m=e[4],v=e[5],p=e[6],E=e[7],b=e[8];return Math.abs(r-d)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-R)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(o-M)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(u-m)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-v)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(s-p)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(h-E)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(f-b)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=a},function(t,e,r){"use strict";function n(){var t=new R.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function i(t,e,r){var n=new R.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function u(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function s(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)}function h(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function f(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function d(t,e){var r=e[0],n=e[1],a=e[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t}function l(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=function(t){var e=new R.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=i,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=o,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=s,e.squaredDistance=h,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=d,e.dot=l,e.cross=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],u=r[1],c=r[2];return t[0]=a*c-i*u,t[1]=i*o-n*c,t[2]=n*u-a*o,t},e.lerp=function(t,e,r,n){var a=e[0],i=e[1],o=e[2];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=o+n*(r[2]-o),t},e.hermite=function(t,e,r,n,a,i){var o=i*i,u=o*(2*i-3)+1,c=o*(i-2)+i,s=o*(i-1),h=o*(3-2*i);return t[0]=e[0]*u+r[0]*c+n[0]*s+a[0]*h,t[1]=e[1]*u+r[1]*c+n[1]*s+a[1]*h,t[2]=e[2]*u+r[2]*c+n[2]*s+a[2]*h,t},e.bezier=function(t,e,r,n,a,i){var o=1-i,u=o*o,c=i*i,s=u*o,h=3*i*u,f=3*c*o,d=c*i;return t[0]=e[0]*s+r[0]*h+n[0]*f+a[0]*d,t[1]=e[1]*s+r[1]*h+n[1]*f+a[1]*d,t[2]=e[2]*s+r[2]*h+n[2]*f+a[2]*d,t},e.random=function(t,e){e=e||1;var r=2*R.RANDOM()*Math.PI,n=2*R.RANDOM()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t},e.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[3]*n+r[7]*a+r[11]*i+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/o,t[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/o,t[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/o,t},e.transformMat3=function(t,e,r){var n=e[0],a=e[1],i=e[2];return t[0]=n*r[0]+a*r[3]+i*r[6],t[1]=n*r[1]+a*r[4]+i*r[7],t[2]=n*r[2]+a*r[5]+i*r[8],t},e.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],u=r[1],c=r[2],s=r[3],h=s*n+u*i-c*a,f=s*a+c*n-o*i,d=s*i+o*a-u*n,l=-o*n-u*a-c*i;return t[0]=h*s+l*-o+f*-c-d*-u,t[1]=f*s+l*-u+d*-o-h*-c,t[2]=d*s+l*-c+h*-u-f*-o,t},e.rotateX=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.rotateY=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.rotateZ=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.angle=function(t,e){var r=i(t[0],t[1],t[2]),n=i(e[0],e[1],e[2]);d(r,r),d(n,n);var a=l(r,n);return a>1?0:a<-1?Math.PI:Math.acos(a)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],i=e[0],o=e[1],u=e[2];return Math.abs(r-i)<=R.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=R.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-u)<=R.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var R=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.sub=o,e.mul=u,e.div=c,e.dist=s,e.sqrDist=h,e.len=a,e.sqrLen=f,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var u,c=void 0;for(r||(r=3),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,c=n;c<u;c+=r)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],i(t,t,o),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}}()},function(t,e,r){"use strict";function n(){var t=new l.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function i(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function o(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function u(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function c(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+i*i)}function s(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return r*r+n*n+a*a+i*i}function h(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)}function f(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function d(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*r+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=a*o,t[3]=i*o),t}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=function(t){var e=new l.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,r,n){var a=new l.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=a,e.multiply=i,e.divide=o,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},e.distance=c,e.squaredDistance=s,e.length=h,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=d,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,r,n){var a=e[0],i=e[1],o=e[2],u=e[3];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=o+n*(r[2]-o),t[3]=u+n*(r[3]-u),t},e.random=function(t,e){return e=e||1,t[0]=l.RANDOM(),t[1]=l.RANDOM(),t[2]=l.RANDOM(),t[3]=l.RANDOM(),d(t,t),u(t,t,e),t},e.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o,t[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o,t[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o,t[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o,t},e.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],u=r[1],c=r[2],s=r[3],h=s*n+u*i-c*a,f=s*a+c*n-o*i,d=s*i+o*a-u*n,l=-o*n-u*a-c*i;return t[0]=h*s+l*-o+f*-c-d*-u,t[1]=f*s+l*-u+d*-o-h*-c,t[2]=d*s+l*-c+h*-u-f*-o,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=e[0],u=e[1],c=e[2],s=e[3];return Math.abs(r-o)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-u)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-c)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-s)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))};var l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.sub=a,e.mul=i,e.div=o,e.dist=c,e.sqrDist=s,e.len=h,e.sqrLen=f,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var u,c=void 0;for(r||(r=4),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,c=n;c<u;c+=r)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],t[3]=e[c+3],i(t,t,o),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2],e[c+3]=t[3];return e}}()},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var a=n(r(0)),i=n(r(5)),o=n(r(6)),u=n(r(1)),c=n(r(7)),s=n(r(8)),h=n(r(9)),f=n(r(2)),d=n(r(3));e.glMatrix=a,e.mat2=i,e.mat2d=o,e.mat3=u,e.mat4=c,e.quat=s,e.vec2=h,e.vec3=f,e.vec4=d},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=r[0],c=r[1],s=r[2],h=r[3];return t[0]=n*u+i*c,t[1]=a*u+o*c,t[2]=n*s+i*h,t[3]=a*s+o*h,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,r,n){var a=new i.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a},e.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},e.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*i-a*n;return o?(o=1/o,t[0]=i*o,t[1]=-n*o,t[2]=-a*o,t[3]=r*o,t):null},e.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=n,e.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+i*u,t[1]=a*c+o*u,t[2]=n*-u+i*c,t[3]=a*-u+o*c,t},e.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=r[0],c=r[1];return t[0]=n*u,t[1]=a*u,t[2]=i*c,t[3]=o*c,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],u=e[0],c=e[1],s=e[2],h=e[3];return Math.abs(r-u)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-s)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-h)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))},e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=a},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],s=r[0],h=r[1],f=r[2],d=r[3],l=r[4],R=r[5];return t[0]=n*s+i*h,t[1]=a*s+o*h,t[2]=n*f+i*d,t[3]=a*f+o*d,t[4]=n*l+i*R+u,t[5]=a*l+o*R+c,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new i.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,r,n,a,o){var u=new i.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=a,u[5]=o,u},e.set=function(t,e,r,n,a,i,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t},e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],c=r*i-n*a;return c?(c=1/c,t[0]=i*c,t[1]=-n*c,t[2]=-a*c,t[3]=r*c,t[4]=(a*u-i*o)*c,t[5]=(n*o-r*u)*c,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=n,e.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],s=Math.sin(r),h=Math.cos(r);return t[0]=n*h+i*s,t[1]=a*h+o*s,t[2]=n*-s+i*h,t[3]=a*-s+o*h,t[4]=u,t[5]=c,t},e.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],s=r[0],h=r[1];return t[0]=n*s,t[1]=a*s,t[2]=i*h,t[3]=o*h,t[4]=u,t[5]=c,t},e.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],s=r[0],h=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=n*s+i*h+u,t[5]=a*s+o*h+c,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},e.subtract=a,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],u=t[4],c=t[5],s=e[0],h=e[1],f=e[2],d=e[3],l=e[4],R=e[5];return Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-h)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-f)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-l)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(c-R)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=a},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],s=e[6],h=e[7],f=e[8],d=e[9],l=e[10],R=e[11],M=e[12],m=e[13],v=e[14],p=e[15],E=r[0],b=r[1],g=r[2],U=r[3];return t[0]=E*n+b*u+g*f+U*M,t[1]=E*a+b*c+g*d+U*m,t[2]=E*i+b*s+g*l+U*v,t[3]=E*o+b*h+g*R+U*p,E=r[4],b=r[5],g=r[6],U=r[7],t[4]=E*n+b*u+g*f+U*M,t[5]=E*a+b*c+g*d+U*m,t[6]=E*i+b*s+g*l+U*v,t[7]=E*o+b*h+g*R+U*p,E=r[8],b=r[9],g=r[10],U=r[11],t[8]=E*n+b*u+g*f+U*M,t[9]=E*a+b*c+g*d+U*m,t[10]=E*i+b*s+g*l+U*v,t[11]=E*o+b*h+g*R+U*p,E=r[12],b=r[13],g=r[14],U=r[15],t[12]=E*n+b*u+g*f+U*M,t[13]=E*a+b*c+g*d+U*m,t[14]=E*i+b*s+g*l+U*v,t[15]=E*o+b*h+g*R+U*p,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new i.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,r,n,a,o,u,c,s,h,f,d,l,R,M,m){var v=new i.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=a,v[5]=o,v[6]=u,v[7]=c,v[8]=s,v[9]=h,v[10]=f,v[11]=d,v[12]=l,v[13]=R,v[14]=M,v[15]=m,v},e.set=function(t,e,r,n,a,i,o,u,c,s,h,f,d,l,R,M,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=u,t[7]=c,t[8]=s,t[9]=h,t[10]=f,t[11]=d,t[12]=l,t[13]=R,t[14]=M,t[15]=m,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],i=e[6],o=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],c=e[6],s=e[7],h=e[8],f=e[9],d=e[10],l=e[11],R=e[12],M=e[13],m=e[14],v=e[15],p=r*u-n*o,E=r*c-a*o,b=r*s-i*o,g=n*c-a*u,U=n*s-i*u,A=a*s-i*c,_=h*M-f*R,y=h*m-d*R,L=h*v-l*R,T=f*m-d*M,S=f*v-l*M,w=d*v-l*m,I=p*w-E*S+b*T+g*L-U*y+A*_;return I?(I=1/I,t[0]=(u*w-c*S+s*T)*I,t[1]=(a*S-n*w-i*T)*I,t[2]=(M*A-m*U+v*g)*I,t[3]=(d*U-f*A-l*g)*I,t[4]=(c*L-o*w-s*y)*I,t[5]=(r*w-a*L+i*y)*I,t[6]=(m*b-R*A-v*E)*I,t[7]=(h*A-d*b+l*E)*I,t[8]=(o*S-u*L+s*_)*I,t[9]=(n*L-r*S-i*_)*I,t[10]=(R*U-M*b+v*p)*I,t[11]=(f*b-h*U-l*p)*I,t[12]=(u*y-o*T-c*_)*I,t[13]=(r*T-n*y+a*_)*I,t[14]=(M*E-R*g-m*p)*I,t[15]=(h*g-f*E+d*p)*I,t):null},e.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],c=e[6],s=e[7],h=e[8],f=e[9],d=e[10],l=e[11],R=e[12],M=e[13],m=e[14],v=e[15];return t[0]=u*(d*v-l*m)-f*(c*v-s*m)+M*(c*l-s*d),t[1]=-(n*(d*v-l*m)-f*(a*v-i*m)+M*(a*l-i*d)),t[2]=n*(c*v-s*m)-u*(a*v-i*m)+M*(a*s-i*c),t[3]=-(n*(c*l-s*d)-u*(a*l-i*d)+f*(a*s-i*c)),t[4]=-(o*(d*v-l*m)-h*(c*v-s*m)+R*(c*l-s*d)),t[5]=r*(d*v-l*m)-h*(a*v-i*m)+R*(a*l-i*d),t[6]=-(r*(c*v-s*m)-o*(a*v-i*m)+R*(a*s-i*c)),t[7]=r*(c*l-s*d)-o*(a*l-i*d)+h*(a*s-i*c),t[8]=o*(f*v-l*M)-h*(u*v-s*M)+R*(u*l-s*f),t[9]=-(r*(f*v-l*M)-h*(n*v-i*M)+R*(n*l-i*f)),t[10]=r*(u*v-s*M)-o*(n*v-i*M)+R*(n*s-i*u),t[11]=-(r*(u*l-s*f)-o*(n*l-i*f)+h*(n*s-i*u)),t[12]=-(o*(f*m-d*M)-h*(u*m-c*M)+R*(u*d-c*f)),t[13]=r*(f*m-d*M)-h*(n*m-a*M)+R*(n*d-a*f),t[14]=-(r*(u*m-c*M)-o*(n*m-a*M)+R*(n*c-a*u)),t[15]=r*(u*d-c*f)-o*(n*d-a*f)+h*(n*c-a*u),t},e.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],u=t[6],c=t[7],s=t[8],h=t[9],f=t[10],d=t[11],l=t[12],R=t[13],M=t[14],m=t[15];return(e*o-r*i)*(f*m-d*M)-(e*u-n*i)*(h*m-d*R)+(e*c-a*i)*(h*M-f*R)+(r*u-n*o)*(s*m-d*l)-(r*c-a*o)*(s*M-f*l)+(n*c-a*u)*(s*R-h*l)},e.multiply=n,e.translate=function(t,e,r){var n=r[0],a=r[1],i=r[2],o=void 0,u=void 0,c=void 0,s=void 0,h=void 0,f=void 0,d=void 0,l=void 0,R=void 0,M=void 0,m=void 0,v=void 0;return e===t?(t[12]=e[0]*n+e[4]*a+e[8]*i+e[12],t[13]=e[1]*n+e[5]*a+e[9]*i+e[13],t[14]=e[2]*n+e[6]*a+e[10]*i+e[14],t[15]=e[3]*n+e[7]*a+e[11]*i+e[15]):(o=e[0],u=e[1],c=e[2],s=e[3],h=e[4],f=e[5],d=e[6],l=e[7],R=e[8],M=e[9],m=e[10],v=e[11],t[0]=o,t[1]=u,t[2]=c,t[3]=s,t[4]=h,t[5]=f,t[6]=d,t[7]=l,t[8]=R,t[9]=M,t[10]=m,t[11]=v,t[12]=o*n+h*a+R*i+e[12],t[13]=u*n+f*a+M*i+e[13],t[14]=c*n+d*a+m*i+e[14],t[15]=s*n+l*a+v*i+e[15]),t},e.scale=function(t,e,r){var n=r[0],a=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,r,n){var a=n[0],o=n[1],u=n[2],c=Math.sqrt(a*a+o*o+u*u),s=void 0,h=void 0,f=void 0,d=void 0,l=void 0,R=void 0,M=void 0,m=void 0,v=void 0,p=void 0,E=void 0,b=void 0,g=void 0,U=void 0,A=void 0,_=void 0,y=void 0,L=void 0,T=void 0,S=void 0,w=void 0,I=void 0,x=void 0,P=void 0;return Math.abs(c)<i.EPSILON?null:(a*=c=1/c,o*=c,u*=c,s=Math.sin(r),f=1-(h=Math.cos(r)),d=e[0],l=e[1],R=e[2],M=e[3],m=e[4],v=e[5],p=e[6],E=e[7],b=e[8],g=e[9],U=e[10],A=e[11],_=a*a*f+h,y=o*a*f+u*s,L=u*a*f-o*s,T=a*o*f-u*s,S=o*o*f+h,w=u*o*f+a*s,I=a*u*f+o*s,x=o*u*f-a*s,P=u*u*f+h,t[0]=d*_+m*y+b*L,t[1]=l*_+v*y+g*L,t[2]=R*_+p*y+U*L,t[3]=M*_+E*y+A*L,t[4]=d*T+m*S+b*w,t[5]=l*T+v*S+g*w,t[6]=R*T+p*S+U*w,t[7]=M*T+E*S+A*w,t[8]=d*I+m*x+b*P,t[9]=l*I+v*x+g*P,t[10]=R*I+p*x+U*P,t[11]=M*I+E*x+A*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[4],o=e[5],u=e[6],c=e[7],s=e[8],h=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+s*n,t[5]=o*a+h*n,t[6]=u*a+f*n,t[7]=c*a+d*n,t[8]=s*a-i*n,t[9]=h*a-o*n,t[10]=f*a-u*n,t[11]=d*a-c*n,t},e.rotateY=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],o=e[1],u=e[2],c=e[3],s=e[8],h=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-s*n,t[1]=o*a-h*n,t[2]=u*a-f*n,t[3]=c*a-d*n,t[8]=i*n+s*a,t[9]=o*n+h*a,t[10]=u*n+f*a,t[11]=c*n+d*a,t},e.rotateZ=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],o=e[1],u=e[2],c=e[3],s=e[4],h=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+s*n,t[1]=o*a+h*n,t[2]=u*a+f*n,t[3]=c*a+d*n,t[4]=s*a-i*n,t[5]=h*a-o*n,t[6]=f*a-u*n,t[7]=d*a-c*n,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,r){var n=r[0],a=r[1],o=r[2],u=Math.sqrt(n*n+a*a+o*o),c=void 0,s=void 0,h=void 0;return Math.abs(u)<i.EPSILON?null:(n*=u=1/u,a*=u,o*=u,c=Math.sin(e),h=1-(s=Math.cos(e)),t[0]=n*n*h+s,t[1]=a*n*h+o*c,t[2]=o*n*h-a*c,t[3]=0,t[4]=n*a*h-o*c,t[5]=a*a*h+s,t[6]=o*a*h+n*c,t[7]=0,t[8]=n*o*h+a*c,t[9]=a*o*h-n*c,t[10]=o*o*h+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=n+n,c=a+a,s=i+i,h=n*u,f=n*c,d=n*s,l=a*c,R=a*s,M=i*s,m=o*u,v=o*c,p=o*s;return t[0]=1-(l+M),t[1]=f+p,t[2]=d-v,t[3]=0,t[4]=f-p,t[5]=1-(h+M),t[6]=R+m,t[7]=0,t[8]=d+v,t[9]=R-m,t[10]=1-(h+l),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[4],o=e[5],u=e[6],c=e[8],s=e[9],h=e[10];return t[0]=Math.sqrt(r*r+n*n+a*a),t[1]=Math.sqrt(i*i+o*o+u*u),t[2]=Math.sqrt(c*c+s*s+h*h),t},e.getRotation=function(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,e,r,n){var a=e[0],i=e[1],o=e[2],u=e[3],c=a+a,s=i+i,h=o+o,f=a*c,d=a*s,l=a*h,R=i*s,M=i*h,m=o*h,v=u*c,p=u*s,E=u*h,b=n[0],g=n[1],U=n[2];return t[0]=(1-(R+m))*b,t[1]=(d+E)*b,t[2]=(l-p)*b,t[3]=0,t[4]=(d-E)*g,t[5]=(1-(f+m))*g,t[6]=(M+v)*g,t[7]=0,t[8]=(l+p)*U,t[9]=(M-v)*U,t[10]=(1-(f+R))*U,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,r,n,a){var i=e[0],o=e[1],u=e[2],c=e[3],s=i+i,h=o+o,f=u+u,d=i*s,l=i*h,R=i*f,M=o*h,m=o*f,v=u*f,p=c*s,E=c*h,b=c*f,g=n[0],U=n[1],A=n[2],_=a[0],y=a[1],L=a[2];return t[0]=(1-(M+v))*g,t[1]=(l+b)*g,t[2]=(R-E)*g,t[3]=0,t[4]=(l-b)*U,t[5]=(1-(d+v))*U,t[6]=(m+p)*U,t[7]=0,t[8]=(R+E)*A,t[9]=(m-p)*A,t[10]=(1-(d+M))*A,t[11]=0,t[12]=r[0]+_-(t[0]*_+t[4]*y+t[8]*L),t[13]=r[1]+y-(t[1]*_+t[5]*y+t[9]*L),t[14]=r[2]+L-(t[2]*_+t[6]*y+t[10]*L),t[15]=1,t},e.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,u=n+n,c=a+a,s=r*o,h=n*o,f=n*u,d=a*o,l=a*u,R=a*c,M=i*o,m=i*u,v=i*c;return t[0]=1-f-R,t[1]=h+v,t[2]=d-m,t[3]=0,t[4]=h-v,t[5]=1-s-R,t[6]=l+M,t[7]=0,t[8]=d+m,t[9]=l-M,t[10]=1-s-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,r,n,a,i,o){var u=1/(r-e),c=1/(a-n),s=1/(i-o);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(a+n)*c,t[10]=(o+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*s,t[15]=0,t},e.perspective=function(t,e,r,n,a){var i=1/Math.tan(e/2),o=1/(n-a);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*o,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+u),s=2/(a+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(o-u)*c*.5,t[9]=(a-i)*s*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,e,r,n,a,i,o){var u=1/(e-r),c=1/(n-a),s=1/(i-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+r)*u,t[13]=(a+n)*c,t[14]=(o+i)*s,t[15]=1,t},e.lookAt=function(t,e,r,n){var a=void 0,o=void 0,u=void 0,c=void 0,s=void 0,h=void 0,f=void 0,d=void 0,l=void 0,R=void 0,M=e[0],m=e[1],v=e[2],p=n[0],E=n[1],b=n[2],g=r[0],U=r[1],A=r[2];return Math.abs(M-g)<i.EPSILON&&Math.abs(m-U)<i.EPSILON&&Math.abs(v-A)<i.EPSILON?mat4.identity(t):(f=M-g,d=m-U,l=v-A,a=E*(l*=R=1/Math.sqrt(f*f+d*d+l*l))-b*(d*=R),o=b*(f*=R)-p*l,u=p*d-E*f,(R=Math.sqrt(a*a+o*o+u*u))?(a*=R=1/R,o*=R,u*=R):(a=0,o=0,u=0),c=d*u-l*o,s=l*a-f*u,h=f*o-d*a,(R=Math.sqrt(c*c+s*s+h*h))?(c*=R=1/R,s*=R,h*=R):(c=0,s=0,h=0),t[0]=a,t[1]=c,t[2]=f,t[3]=0,t[4]=o,t[5]=s,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=l,t[11]=0,t[12]=-(a*M+o*m+u*v),t[13]=-(c*M+s*m+h*v),t[14]=-(f*M+d*m+l*v),t[15]=1,t)},e.targetTo=function(t,e,r,n){var a=e[0],i=e[1],o=e[2],u=n[0],c=n[1],s=n[2],h=a-r[0],f=i-r[1],d=o-r[2],l=h*h+f*f+d*d;l>0&&(h*=l=1/Math.sqrt(l),f*=l,d*=l);var R=c*d-s*f,M=s*h-u*d,m=u*f-c*h;return t[0]=R,t[1]=M,t[2]=m,t[3]=0,t[4]=f*m-d*M,t[5]=d*R-h*m,t[6]=h*M-f*R,t[7]=0,t[8]=h,t[9]=f,t[10]=d,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},e.subtract=a,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],u=t[4],c=t[5],s=t[6],h=t[7],f=t[8],d=t[9],l=t[10],R=t[11],M=t[12],m=t[13],v=t[14],p=t[15],E=e[0],b=e[1],g=e[2],U=e[3],A=e[4],_=e[5],y=e[6],L=e[7],T=e[8],S=e[9],w=e[10],I=e[11],x=e[12],P=e[13],G=e[14],F=e[15];return Math.abs(r-E)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(n-b)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(a-g)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-U)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(U))&&Math.abs(u-A)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-_)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(s-y)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(h-L)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(f-T)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-S)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(l-w)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(R-I)<=i.EPSILON*Math.max(1,Math.abs(R),Math.abs(I))&&Math.abs(M-x)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(x))&&Math.abs(m-P)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(v-G)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(G))&&Math.abs(p-F)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=a},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function a(){var t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function o(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=r[0],c=r[1],s=r[2],h=r[3];return t[0]=n*h+o*u+a*s-i*c,t[1]=a*h+o*c+i*u-n*s,t[2]=i*h+o*s+n*c-a*u,t[3]=o*h-n*u-a*c-i*s,t}function u(t,e,r,n){var a=e[0],i=e[1],o=e[2],u=e[3],c=r[0],s=r[1],h=r[2],f=r[3],d=void 0,l=void 0,R=void 0,M=void 0,m=void 0;return(l=a*c+i*s+o*h+u*f)<0&&(l=-l,c=-c,s=-s,h=-h,f=-f),1-l>1e-6?(d=Math.acos(l),R=Math.sin(d),M=Math.sin((1-n)*d)/R,m=Math.sin(n*d)/R):(M=1-n,m=n),t[0]=M*a+m*c,t[1]=M*i+m*s,t[2]=M*o+m*h,t[3]=M*u+m*f,t}function c(t,e){var r=e[0]+e[4]+e[8],n=void 0;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*o+o]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[o]=(e[3*o+a]+e[3*a+o])*n}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=a,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=i,e.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},e.multiply=o,e.rotateX=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*u,t[1]=a*c+i*u,t[2]=i*c-a*u,t[3]=o*c-n*u,t},e.rotateY=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c-i*u,t[1]=a*c+o*u,t[2]=i*c+n*u,t[3]=o*c-a*u,t},e.rotateZ=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*u,t[1]=a*c-n*u,t[2]=i*c+o*u,t[3]=o*c-i*u,t},e.calculateW=function(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t},e.slerp=u,e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*r+n*n+a*a+i*i,u=o?1/o:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-a*u,t[3]=i*u,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=c,e.fromEuler=function(t,e,r,n){var a=.5*Math.PI/180;e*=a,r*=a,n*=a;var i=Math.sin(e),o=Math.cos(e),u=Math.sin(r),c=Math.cos(r),s=Math.sin(n),h=Math.cos(n);return t[0]=i*c*h-o*u*s,t[1]=o*u*h+i*c*s,t[2]=o*c*s-i*u*h,t[3]=o*c*h+i*u*s,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=n(r(0)),h=n(r(1)),f=n(r(2)),d=n(r(3)),l=(e.clone=d.clone,e.fromValues=d.fromValues,e.copy=d.copy,e.set=d.set,e.add=d.add,e.mul=o,e.scale=d.scale,e.dot=d.dot,e.lerp=d.lerp,e.length=d.length),R=(e.len=l,e.squaredLength=d.squaredLength),M=(e.sqrLen=R,e.normalize=d.normalize);e.exactEquals=d.exactEquals,e.equals=d.equals,e.rotationTo=function(){var t=f.create(),e=f.fromValues(1,0,0),r=f.fromValues(0,1,0);return function(n,a,o){var u=f.dot(a,o);return u<-.999999?(f.cross(t,e,a),f.len(t)<1e-6&&f.cross(t,r,a),f.normalize(t,t),i(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(f.cross(t,a,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,M(n,n))}}(),e.sqlerp=function(){var t=a(),e=a();return function(r,n,a,i,o,c){return u(t,n,o,c),u(e,a,i,c),u(r,t,e,2*c*(1-c)),r}}(),e.setAxes=function(){var t=h.create();return function(e,r,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],M(e,c(e,t))}}()},function(t,e,r){"use strict";function n(){var t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function i(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function o(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function c(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function s(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function h(t){var e=t[0],r=t[1];return e*e+r*r}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=n,e.clone=function(t){var e=new f.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var r=new f.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,r){return t[0]=e,t[1]=r,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},e.subtract=a,e.multiply=i,e.divide=o,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},e.distance=u,e.squaredDistance=c,e.length=s,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,e,r,n){var a=e[0],i=e[1];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t},e.random=function(t,e){e=e||1;var r=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},e.transformMat2=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t},e.transformMat2d=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t},e.transformMat3=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t},e.transformMat4=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var r=t[0],n=t[1],a=e[0],i=e[1];return Math.abs(r-a)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-i)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))};var f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.len=s,e.sub=a,e.mul=i,e.div=o,e.dist=u,e.sqrDist=c,e.sqrLen=h,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var u,c=void 0;for(r||(r=2),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,c=n;c<u;c+=r)t[0]=e[c],t[1]=e[c+1],i(t,t,o),e[c]=t[0],e[c+1]=t[1];return e}}()}])}),function(){var t;RedGLUtil={throwFunc:function(){throw Array.prototype.slice.call(arguments).join(" ")},extendsProto:function(t,e){for(var r in e.prototype)t.prototype[r]=e.prototype[r]},hexToRGB:function(t){var e,r;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return r=[],3==(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),e="0x"+e.join(""),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,r;RedGLUtil.throwFunc("RedGLUtil.hexToRGB : 잘못된 hex값입니다.",t)},getStrFromComment:function(e){if("string"!=typeof e&&RedGLUtil.throwFunc("getStrFromComment : 해석할 값은 문자열만 가능",e),t=e.toString().trim().match(/(\/\*)[\s\S]+(\*\/)/g))return t[0].replace(/\/\*|\*\//g,"");RedGLUtil.throwFunc("getStrFromComment : 해석할 불가능한 값",e)}},Object.freeze(RedGLUtil)}(),function(){var t,e,r,n,a,i,o,u,c,s,h,f;e=function(t){if(!(this instanceof e))return new e(t);for(r="VENDOR,VERSION,SHADING_LANGUAGE_VERSION,RENDERER,MAX_VERTEX_ATTRIBS,MAX_VARYING_VECTORS,MAX_VERTEX_UNIFORM_VECTORS,MAX_VERTEX_TEXTURE_IMAGE_UNITS,MAX_FRAGMENT_UNIFORM_VECTORS,MAX_TEXTURE_SIZE,MAX_CUBE_MAP_TEXTURE_SIZE,MAX_COMBINED_TEXTURE_IMAGE_UNITS,MAX_TEXTURE_IMAGE_UNITS,MAX_RENDERBUFFER_SIZE,MAX_VIEWPORT_DIMS,RED_BITS,GREEN_BITS,BLUE_BITS,ALPHA_BITS,DEPTH_BITS,STENCIL_BITS".split(","),n=r.length;n--;)this[a=r[n]]=t.getParameter(t[a])},t=function(){var t,e,r,n,a,i;return e={alpha:!1,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1},t="webkit-3d,moz-webgl,3d,experimental-webgl,webgl".split(","),function(o,u){if(i=JSON.parse(JSON.stringify(e)),a=t.length,u)for(a in u)i[a]=u[a];for(;a--;)if(r=o.getContext(n=t[a],i))return r.version=n,r;return null}}(),(RedGL=function(r,n,a){var i,o,u,c;if(!(this instanceof RedGL))return new RedGL(r,n);r instanceof Element&&"CANVAS"==r.tagName||RedGLUtil.throwFunc("RedGL : Canvas Element만 허용"),o=this,u=!0,c=1,this.canvas=r,Object.defineProperty(this,"renderScale",{get:function(){return c},set:function(t){c=t,this.setSize(this._width,this._height)}}),Object.defineProperty(this,"fullMode",{get:function(){return u},set:function(t){"boolean"!=typeof t&&RedGLUtil.throwFunc("RedGL : Boolean만 가능."),u=t,this.setSize(this._width,this._height)}}),this._width=500,this._height=500,this.gl=i=t(r),i&&(this._detect=e(i,a)),this._datas={},this._UUID=RedGL.makeUUID(),requestAnimationFrame(function(t){var e;n&&n.call(o,!!i),window.addEventListener("resize",function(){o.setSize(o._width,o._height)}),o.setSize(o._width,o._height);var r=o._detect.MAX_COMBINED_TEXTURE_IMAGE_UNITS;for(e=RedBitmapTexture(o,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzMxRDhBQzRFNUZFMTFFN0IxMDVGNEEzQjQ0RjAwRDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzMxRDhBQzVFNUZFMTFFN0IxMDVGNEEzQjQ0RjAwRDIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MzFEOEFDMkU1RkUxMUU3QjEwNUY0QTNCNDRGMDBEMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MzFEOEFDM0U1RkUxMUU3QjEwNUY0QTNCNDRGMDBEMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuojYFUAAAAQSURBVHjaYvj//z8DQIABAAj8Av7bok0WAAAAAElFTkSuQmCC");r--;)i.activeTexture(i.TEXTURE0+r),i.bindTexture(i.TEXTURE_2D,e.webglTexture)})}).makeUUID=(i=0,function(){return i++}),RedGL.prototype={setSize:(c=0,s=0,function(t,e){this.fullMode?(o=document.documentElement?document.documentElement.clientWidth:document.body.clientWidth,u=window.innerHeight):(void 0==t&&RedGLUtil.throwFunc("RedGL : width가 입력되지 않았습니다."),void 0==e&&RedGLUtil.throwFunc("RedGL : height가 입력되지 않았습니다."),this._width=o=t,this._height=u=e),h=window.devicePixelRatio||1,f=this.canvas,c==o&&s==u||(f.width=o*h*this.renderScale,f.height=u*h*this.renderScale,f.style.width=o,f.style.height=u,c=o,s=u)})},Object.freeze(RedGL)}(),function(){var t;(RedBaseContainer=function(){RedGLUtil.throwFunc("RedBaseContainer : 생성자/직접실행으로 사용 할 수 없습니다.")}).prototype={addChild:function(e){e instanceof RedMesh||RedGLUtil.throwFunc("addChild","RedMesh Instance만 가능"),-1!=(t=this.children.indexOf(e))&&(e=this.children.splice(t,1)),this.children.push(e)},addChildAt:function(){var t;return function(e,r){e instanceof RedMesh||RedGLUtil.throwFunc("addChildAt","RedMesh Instance만 가능"),t=this.children.indexOf(e),this.children.splice(t,0,e)}}(),removeChild:function(){var t;return function(e){e instanceof RedMesh||RedGLUtil.throwFunc("removeChild","RedMesh Instance만 가능"),-1==(t=this.children.indexOf(e))?RedGLUtil.throwFunc("removeChild","존재하지 않는 RedMesh를 삭제하려고 함"):this.children.splice(t,1)}}(),removeChildAt:function(){return function(t){"number"!=typeof t&&RedGLUtil.throwFunc("removeChildAt","index가 Number형이 아님 "),this.children.splice(void 0,1)}},removeChildAll:function(){this.children.length=0},getChildAt:function(t){return"number"!=typeof t&&RedGLUtil.throwFunc("getChildAt","index가 Number형이 아님 "),this.children[t]},getChildIndex:function(t){return t instanceof RedMesh||RedGLUtil.throwFunc("getChildIndex","RedMesh Instance만 가능"),this.children.indexOf(t)},numChildren:function(t){return this.children.length}},Object.freeze(RedBaseContainer)}(),(RedBaseObject3D=function(){RedGLUtil.throwFunc("RedBaseObject3D : 생성자/직접실행으로 사용 할 수 없습니다.")}).prototype={},Object.freeze(RedBaseObject3D),function(){var t,e,r,n,a;t=function(t,e,r){switch(e){case RedBuffer.ARRAY_BUFFER:if(r instanceof Float32Array||r instanceof Float64Array){if(r instanceof Float32Array)return t.FLOAT;if(r instanceof Float64Array)return t.FLOAT}else RedGLUtil.throwFunc("RedBuffer : 올바른 TypedArray(RedBuffer.ARRAY_BUFFER)형식을 사용해야합니다.");break;case RedBuffer.ELEMENT_ARRAY_BUFFER:if(r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Uint32Array||r instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array){if(r instanceof Int8Array)return t.BYTE;if(r instanceof Uint8Array)return t.UNSIGNED_BYTE;if(r instanceof Uint16Array)return t.UNSIGNED_SHORT;if(r instanceof Uint32Array)return t.UNSIGNED_INT;if(r instanceof Int16Array)return t.SHORT;if(r instanceof Int32Array)return t.INT}else RedGLUtil.throwFunc("RedBuffer : 올바른 TypedArray(RedBuffer.ELEMENT_ARRAY_BUFFER)형식을 사용해야합니다.");break;default:RedGLUtil.throwFunc("RedBuffer : bufferType - 지원하지 않는 버퍼타입입니다. ")}},e=function(t,e){switch(e){case RedBuffer.ARRAY_BUFFER:return t.ARRAY_BUFFER;case RedBuffer.ELEMENT_ARRAY_BUFFER:return t.ELEMENT_ARRAY_BUFFER;default:RedGLUtil.throwFunc("RedBuffer : bufferType - 지원하지 않는 버퍼타입입니다. ")}},r=function(t,e,r,i){switch(n=0,e){case RedBuffer.ARRAY_BUFFER:if(t.interleaveDefineInfo=i,i){for(a in i)i[a].offset=i.length<2?0:n,n+=i[a].size,i[a]._UUID=RedGL.makeUUID();i.forEach(function(t){i[t.attributeKey]=t}),i.length<2?(t.stride=0,t.pointNum=r.length/3):(t.stride=n,t.pointNum=r.length/n)}else RedGLUtil.throwFunc("RedBuffer : interleaveDefineInfo는 반드시 정의 되어야합니다.");break;case RedBuffer.ELEMENT_ARRAY_BUFFER:t.pointNum=r.length}},(RedBuffer=function(n,a,i,o,u){if(!(this instanceof RedBuffer))return new RedBuffer(n,a,i,o,u);n instanceof RedGL||RedGLUtil.throwFunc("RedBuffer : RedGL Instance만 허용됩니다."),"string"!=typeof o&&RedGLUtil.throwFunc("RedBuffer : bufferType - 문자열만 허용됩니다."),"string"!=typeof a&&RedGLUtil.throwFunc("RedBuffer : key - 문자열만 허용됩니다.");var c=n.gl;if(n._datas[o]||(n._datas[o]={}),n._datas[o][a])return n._datas[o][a];n._datas[o][a]=this,this.key=a,this.data=i,this.bufferType=o,this.glArrayType=t(c,this.bufferType,this.data),this.glBufferType=e(c,this.bufferType),this.drawMode=c.STATIC_DRAW,r(this,this.bufferType,this.data,u),this.webglBuffer=c.createBuffer(),this._UUID=RedGL.makeUUID(),this.upload=function(e){this.glArrayType==t(c,o,e)?(this.data=e,c.bindBuffer(this.glBufferType,this.webglBuffer),c.bufferData(this.glBufferType,this.data,this.drawMode)):RedGLUtil.throwFunc("RedBuffer : upload - data형식이 기존 형식과 다름",e)},this.parseInterleaveDefineInfo=function(){r(this,this.bufferType,this.data,this.interleaveDefineInfo)},this.upload(this.data)}).ARRAY_BUFFER="arrayBuffer",RedBuffer.ELEMENT_ARRAY_BUFFER="elementArrayBuffer",Object.freeze(RedBuffer)}(),RedGeometry=function(t,e){if(!(this instanceof RedGeometry))return new RedGeometry(t,e);t instanceof RedBuffer?t.bufferType!=RedBuffer.ARRAY_BUFFER&&RedGLUtil.throwFunc("RedGeometry : interleaveBuffer - RedBuffer.ARRAY_BUFFER 타입만.",t):RedGLUtil.throwFunc("RedGeometry : interleaveBuffer - RedBuffer Instance만 허용.",t),e instanceof RedBuffer?e.bufferType!=RedBuffer.ELEMENT_ARRAY_BUFFER&&RedGLUtil.throwFunc("RedGeometry : indexBuffer - RedBuffer.ELEMENT_ARRAY_BUFFER 타입만.",e):RedGLUtil.throwFunc("RedGeometry : indexBuffer - RedBuffer Instance만 허용.",e),this.interleaveBuffer=t,this.indexBuffer=e,this._UUID=RedGL.makeUUID(),Object.freeze(this)},Object.freeze(RedGeometry),function(){var t;RedMaterial=function(e){if(!(this instanceof RedMaterial))return new RedMaterial(e);this.program=t(e),this.floatTest=1,this.floatTest2=[1,2,3,4,5],this.intTest=1,this.intTest2=[1,2,3,4,5],this.vec4Test=[0,0,0,0],this.mat4Test=mat4.create(),this._UUID=RedGL.makeUUID(),this.checkProperty(),Object.seal(this)},t=function(t){var e,r;return e=function(){},r=function(){},e=RedGLUtil.getStrFromComment(e.toString()),r=RedGLUtil.getStrFromComment(r.toString()),RedProgram(t,"testrProgram",RedShader(t,"testVs",RedShader.VERTEX,e),RedShader(t,"testFS",RedShader.FRAGMENT,r))},RedMaterial.prototype=RedBaseMaterial.prototype,Object.freeze(RedMaterial)}(),function(){var t,e;RedColorMaterial=function(e,r,n){if(!(this instanceof RedColorMaterial))return new RedColorMaterial(e,r,n);this.color=new Float32Array(4),this.setColor(r||"#ff0000",void 0==n?1:n),this.program=t(e),this._UUID=RedGL.makeUUID(),this.checkProperty()},t=function(t){var e,r;return e=function(){},r=function(){},e=RedGLUtil.getStrFromComment(e.toString()),r=RedGLUtil.getStrFromComment(r.toString()),RedProgram(t,"colorProgram",RedShader(t,"colorVs",RedShader.VERTEX,e),RedShader(t,"colorFS",RedShader.FRAGMENT,r))},RedColorMaterial.prototype=RedBaseMaterial.prototype,RedColorMaterial.prototype.setColor=function(t,r){t=t||"#ff2211",void 0==r&&(r=1),r>1&&(r=1),e=RedGLUtil.hexToRGB.call(this,t),this.color[0]=e[0],this.color[1]=e[1],this.color[2]=e[2],this.color[3]=r},Object.freeze(RedColorMaterial)}(),function(){var t;RedBitmapMaterial=function(e,r){if(!(this instanceof RedBitmapMaterial))return new RedBitmapMaterial(e,r);e instanceof RedGL||RedGLUtil.throwFunc("RedBitmapMaterial : RedGL Instance만 허용됩니다."),r instanceof RedBitmapTexture||RedGLUtil.throwFunc("RedBitmapMaterial : RedBitmapTexture Instance만 허용됩니다."),this.diffuseTexture=r,this.program=t(e),this._UUID=RedGL.makeUUID(),this.checkProperty()},t=function(t){var e,r;return e=function(){},r=function(){},e=RedGLUtil.getStrFromComment(e.toString()),r=RedGLUtil.getStrFromComment(r.toString()),RedProgram(t,"bitmapProgram",RedShader(t,"bitmapVs",RedShader.VERTEX,e),RedShader(t,"bitmapFS",RedShader.FRAGMENT,r))},RedBitmapMaterial.prototype=RedBaseMaterial.prototype,Object.freeze(RedBitmapMaterial)}(),RedMesh=function(t,e,r){if(!(this instanceof RedMesh))return new RedMesh(t,e,r);var n;t instanceof RedGL||RedGLUtil.throwFunc("RedMesh : RedGL Instance만 허용됩니다."),e instanceof RedGeometry||RedGLUtil.throwFunc("RedMesh : RedGeometry Instance만 허용됩니다."),r instanceof RedBaseMaterial||RedGLUtil.throwFunc("RedMesh : RedBaseMaterial 확장 Instance만 허용됩니다."),n=t.gl,this.geometry=e,this.material=r,this.drawMode=n.TRIANGLES,this.x=this.y=this.z=0,this.rotationX=this.rotationY=this.rotationZ=0,this.scaleX=this.scaleY=this.scaleZ=1,this.matrix=mat4.create(),this.normalMatrix=mat4.create(),this.children=[],this._UUID=RedGL.makeUUID()},RedGLUtil.extendsProto(RedMesh,RedBaseContainer),RedGLUtil.extendsProto(RedMesh,RedBaseObject3D),Object.freeze(RedMesh),function(){var t,e,r,n,a;t=function(t,e,n,a){return r=t.createProgram(),t.attachShader(r,n.webglShader),t.attachShader(r,a.webglShader),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||RedGLUtil.throwFunc("프로그램을 초기화 할 수 없습니다."),r.key=e,r.vShaderKey=n.key,r.fShaderKey=n.key,t.useProgram(r),r},n=function(){},a=function(){},e=function(t,e,r){r.parseData.attribute&&r.parseData.attribute.list.forEach(function(r){var a=new n;a._UUID=RedGL.makeUUID(),a.location=e.getAttribLocation(t.webglProgram,r.name),-1==a.location?a.msg="쉐이더 main 함수에서 사용되고 있지 않음":(a.attributeType=r.attributeType,a.name=r.name,a.enabled=!1,t.attributeLocation.push(a),t.attributeLocation[r.name]=a)}),r.parseData.uniform&&r.parseData.uniform.list.forEach(function(r){var n,i,o=new a;switch(o._UUID=RedGL.makeUUID(),o.location=e.getUniformLocation(t.webglProgram,r.name),o.location||(o.msg="쉐이더 main 함수에서 사용되고 있지 않음"),o.uniformType=r.uniformType,r.arrayNum,r.uniformType){case"sampler2D":n="sampler2D",i="uniform1f",o.samplerIndex=r.samplerIndex;break;case"samplerCube":n="samplerCube",i="uniform1f",o.samplerIndex=r.samplerIndex;break;case"float":n="float",i="uniform1f";break;case"int":n="int",i="uniform1i";break;case"mat4":n="mat",i="uniformMatrix4fv";break;case"mat3":n="mat",i="uniformMatrix3fv";break;case"mat2":n="mat",i="uniformMatrix2fv";break;case"vec4":n="vec",i="uniform4fv";break;case"vec3":n="vec",i="uniform3fv";break;case"vec2":n="vec",i="uniform2fv"}o.renderType=n,o.renderMethod=i,o.name=r.name,o.materialPropertyName=r.name.charAt(1).toLowerCase()+r.name.substr(2),o.arrayNum=r.arrayNum,r.systemUniformYn?(t.systemUniformLocation.push(o),t.systemUniformLocation[r.name]=o):(t.uniformLocation.push(o),t.uniformLocation[r.name]=o)})},(RedProgram=function(r,n,a,i){var o;return this instanceof RedProgram?(r instanceof RedGL||RedGLUtil.throwFunc("RedProgram : RedGL Instance만 허용됩니다."),"string"!=typeof n&&RedGLUtil.throwFunc("RedProgram : key - 문자열만 허용됩니다."),!a instanceof RedShader&&RedGLUtil.throwFunc("RedProgram : vShaderInfo - RedShader만 허용됩니다."),!i instanceof RedShader&&RedGLUtil.throwFunc("RedProgram : fShaderInfo - RedShader만 허용됩니다."),a.type!=RedShader.VERTEX&&RedGLUtil.throwFunc("RedProgram : vShaderInfo - VERTEX 타입만 허용됩니다."),i.type!=RedShader.FRAGMENT&&RedGLUtil.throwFunc("RedProgram : fShaderInfo - FRAGMENT 타입만 허용됩니다."),o=r.gl,r._datas.RedProgram||(r._datas.RedProgram={}),r._datas.RedProgram[n]?r._datas.RedProgram[n]:(r._datas.RedProgram[n]=this,this.key=n,this.webglProgram=t(o,n,a,i),this.attributeLocation=[],this.uniformLocation=[],this.systemUniformLocation=[],o.useProgram(this.webglProgram),e(this,o,a),e(this,o,i),this._UUID=RedGL.makeUUID(),void Object.freeze(this))):new RedProgram(r,n,a,i)}).prototype={},Object.freeze(RedProgram)}(),[(RedSystemShaderCode={vShareSource:["attribute vec3 aVertexPosition","attribute vec3 aVertexNormal","varying vec3 vVertexNormal","attribute vec2 aTexcoord","varying vec2 vTexcoord","uniform float uTime","varying float vTime","uniform vec2 uResolution","varying vec2 vResolution","uniform mat4 uMVMatrix","uniform mat4 uNMatrix","uniform mat4 uPMatrix","uniform mat4 uCameraMatrix"],fShareSource:["varying vec3 vVertexNormal","varying vec2 vTexcoord","varying float vTime","varying vec2 vResolution","const int DIRETIONAL_MAX = 5","uniform vec3 uDirectionalLightPosition[5]","uniform vec4 uDirectionalLightColor[5]","uniform float uDirectionalLightIntensity[5]","uniform int uDirectionalLightNum","uniform vec4 uAmbientLightColor","uniform float uAmbientIntensity"],systemUniform:{}}).vShareSource,RedSystemShaderCode.fShareSource].forEach(function(t){t.forEach(function(t){"uniform"==(t=t.split(" "))[0]&&(RedSystemShaderCode.systemUniform[t[2]]=1)})}),Object.freeze(RedSystemShaderCode),function(){var t,e,r,n,a,i,o,u;t=function(t,e,r){switch(r){case RedShader.VERTEX:return(a=t.createShader(t.VERTEX_SHADER)).key=e,a.type=r,a;case RedShader.FRAGMENT:return(a=t.createShader(t.FRAGMENT_SHADER)).key=e,a.type=r,a;default:RedGLUtil.throwFunc("RedShader : 쉐이더 타입을 확인하세요!")}},e=function(t,e,r,n){t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||RedGLUtil.throwFunc(t.getShaderInfoLog(r),"쉐이더 컴파일에 실패하였습니다.")},n=function(){var t;return function(e,r){switch(e){case RedShader.VERTEX:t=RedSystemShaderCode.vShareSource.concat();break;case RedShader.FRAGMENT:t=RedSystemShaderCode.fShareSource.concat();break;default:RedGLUtil.throwFunc("RedShader : 쉐이더 타입을 확인하세요!")}return r.forEach(function(e){e=e.replace(";",""),-1==t.indexOf(e)?t.push(e):RedGLUtil.throwFunc("RedShader : ","\n1. 중복된 소스이거나","\n2. RedSystemShaderCode에 정의된 소스\n",e)}),t}}(),r=function(t,e){var r=1;return e=(e=e.replace(/\s+$/,"")).replace(/  /g,"").trim(),i={etc:{list:[],map:{},source:""}},o=e.match(/attribute[\s\S]+?\;|uniform[\s\S]+?\;|varying[\s\S]+?\;|precision[\s\S]+?\;/g),(o=n(t,o=o||[])).sort(),o.forEach(function(t){var n,a,o,u,c,s,h;if(t=t.trim(),e=e.replace(t+";",""),(n=t.split(" "))[2])switch(a=n[0],u=n[1],o=n[2].replace(";","").split("["),s=(s=t.split("="))[1]?s[1].trim().replace(";",""):null,c=o.length>1?+o[1].split("]")[0]:0,o=o[0],a){case"attribute":"a"!=o.charAt(0)&&RedGLUtil.throwFunc("attribute의 첫글자는 a로 시작해야합니다.",o);break;case"uniform":"u"!=o.charAt(0)&&RedGLUtil.throwFunc("uniform의 첫글자는 u로 시작해야합니다.",o);break;case"varying":"v"!=o.charAt(0)&&RedGLUtil.throwFunc("varying의 첫글자는 v로 시작해야합니다.",o)}else a="var",u=n[0],c=(o=n[1].replace(";","").split("[")).length>1?+o[1].split("]")[0]:0,o=o[0];i[a]||(i[a]={},i[a].list=[],i[a].map={},i[a].source=""),h={name:o,arrayNum:c,value:s,systemUniformYn:!!RedSystemShaderCode.systemUniform[c?o+"["+c+"]":o]},"uniform"==a&&(h.uniformType=u),u.indexOf("sampler")>-1&&(h.samplerIndex=r,8==++r&&(r=1)),"attribute"==a&&(h.attributeType=u),i[a].list.push(h),i[a].map[o]=t,i[a].source+=t+";\n"}),[e+="\n"].forEach(function(t){var e=t.split(" "),r=e[1].replace(/\([\s\S]+/g,"").trim();i.etc.list.push({uniformType:e[0],name:r}),i.etc.map[r]=t,i.etc.source+=t+"\n"}),u="",i.precision&&(u+=i.precision.source+"\n//attribute\n"),i.const&&(u+=i.const.source+"\n//const\n"),i.attribute&&(u+=i.attribute.source+"\n//uniform\n"),i.uniform&&(u+=i.uniform.source+"\n//varying\n"),i.varying&&(u+=i.varying.source+"\n//var\n"),i.var&&(u+=i.var.source+"\n//etc\n"),i.etc&&(u+=i.etc.source),i.lastSource=u,i},(RedShader=function(n,a,i,o){var u;if(!(this instanceof RedShader))return new RedShader(n,a,i,o);n instanceof RedGL||RedGLUtil.throwFunc("RedShader : RedGL Instance만 허용됩니다."),"string"!=typeof a&&RedGLUtil.throwFunc("RedShader : key - 문자열만 허용됩니다."),"string"!=typeof i&&RedGLUtil.throwFunc("RedShader : type - 문자열만 허용됩니다."),"string"!=typeof o&&RedGLUtil.throwFunc("RedShader : source - 문자열만 허용됩니다."),u=n.gl,this.webglShader=t(u,a,i),this.parseData=r(i,o),e(u,0,this.webglShader,this.parseData.lastSource),this.key=a,this.type=i,this._UUID=RedGL.makeUUID(),Object.freeze(this)}).FRAGMENT="fragmentShader",RedShader.VERTEX="vertexShader",Object.freeze(RedShader)}(),function(){var t,e,r,n,a,i,o;(RedRenderer=function(){if(!(this instanceof RedRenderer))return new RedRenderer;this.world=null,this._tickKey=null,this._callback=null,this._UUID=RedGL.makeUUID(),this.renderInfo={},this.cacheUniformInfo=[],this.cacheAttrInfo=[],this.cacheTextureInfo=[],Object.seal(this)}).prototype={start:(t=function(n){e.worldRender(r,n),e._callback&&e._callback(n),e._tickKey=requestAnimationFrame(t)},function(n,a){n instanceof RedGL||RedGLUtil.throwFunc("RedGL Instance만 허용"),n.world instanceof RedWorld||RedGLUtil.throwFunc("RedWorld Instance만 허용"),(e=this).world=n.world,r=n,e._tickKey=requestAnimationFrame(t),e._callback=a}),stop:function(){cancelAnimationFrame(this._tickKey)}},RedRenderer.prototype.worldRender=function(){var t,e,r,a,i,o,u,c,s,h,f,d,l,R,M,m,v,p;return h=[],u=function(e){return e.forEach(function(r,n){"number"==typeof e[n]?e[n]=r:e[n]=n<2?t[n+2]*parseFloat(e[n])/100:t[n]*parseFloat(e[n])/100}),e},p=[],c=function(t,e,r,a,i,o){for(var u in l=t.gl,h.length=0,t._datas.RedProgram){var c,s,E,b,g,U,A,_,y;for(f=t._datas.RedProgram[u],n!=f._UUID&&l.useProgram(f.webglProgram),n=f._UUID,d=f.systemUniformLocation,R=d.uTime,M=R.location,m=R._UUID,M&&p[m]!=e&&(l.uniform1f(M,e),p[m]=e),R=d.uResolution,M=R.location,m=R._UUID,v=[o[2],o[3]],M&&p[m]!=v.toString()&&(l.uniform2fv(M,v),p[m]=v.toString()),R=d.uCameraMatrix,M=R.location,m=R._UUID,M&&p[m]!=i.toString()&&(l.uniformMatrix4fv(M,!1,i),p[m]=i.toString()),R=d.uPMatrix,M=R.location,m=R._UUID,M&&p[m]!=a.toString()&&(l.uniformMatrix4fv(M,!1,a),p[m]=a.toString()),(E=r.lightInfo.RedAmbientLight)&&(R=d.uAmbientLightColor,M=R.location,m=R._UUID,g=E.color,M&&p[m]!=g.toString()&&(l.uniform4fv(M,g),p[m]=g.toString()),R=d.uAmbientIntensity,M=R.location,m=R._UUID,g=E.intensity,M&&p[m]!=g&&(l.uniform1f(M,g),p[m]=g)),y=vec3.create(),U=new Float32Array(15),A=new Float32Array(20),_=new Float32Array(5),c=(s=r.lightInfo.RedDirectionalLight).length;c--;)b=(E=s[c]).debugObject,vec3.set(y,E.x,E.y,E.z),vec3.normalize(y,y),b.x=5*-y[0],b.y=5*-y[1],b.z=5*-y[2],h.push(b),R=d.uDirectionalLightPosition,(M=R.location)&&(U[0+3*c]=y[0],U[1+3*c]=y[1],U[2+3*c]=y[2]),R=d.uDirectionalLightColor,(M=R.location)&&(A[0+4*c]=E.color[0],A[1+4*c]=E.color[1],A[2+4*c]=E.color[2],A[3+4*c]=E.color[3]),R=d.uDirectionalLightIntensity,(M=R.location)&&(_[c]=E.intensity);R=d.uDirectionalLightPosition,M=R.location,m=R._UUID,g=U,M&&p[m]!=g.toString()&&(l.uniform3fv(M,g),p[m]=g.toString()),R=d.uDirectionalLightColor,M=R.location,m=R._UUID,g=A,M&&p[m]!=g.toString()&&(l.uniform4fv(M,g),p[m]=g.toString()),R=d.uDirectionalLightIntensity,M=R.location,m=R._UUID,g=_,M&&p[m]!=g.toString()&&(l.uniform1fv(M,g),p[m]=g.toString()),R=d.uDirectionalLightNum,M=R.location,m=R._UUID,g=s.length,M&&p[m]!=g&&(l.uniform1i(M,g),p[m]=g)}return h},s=function(t){t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.frontFace(t.CCW),t.enable(t.CULL_FACE),t.cullFace(t.BACK),t.enable(t.SCISSOR_TEST),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0)},e=[],i=mat4.create(),function(n,f){var d;d=n.gl,o=this,t=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],d.viewport(0,0,d.drawingBufferWidth,d.drawingBufferHeight),d.scissor(0,0,d.drawingBufferWidth,d.drawingBufferHeight),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT),s(d),o.renderInfo={},this.cacheAttrInfo.length=0,o.world._viewList.forEach(function(s){e[0]=s._x,e[1]=s._y,e[2]=s._width,e[3]=s._height,r=s.camera,a=s.scene,r.updateMatrix(),u(e),o.renderInfo[s.key]={orthographic:r.orthographic,x:s._x,y:s._y,width:s._width,height:s._height,viewRectX:e[0],viewRectY:e[1],viewRectWidth:e[2],viewRectHeight:e[3],key:s.key,call:0},d.viewport(e[0],t[3]-e[3]-e[1],e[2],e[3]),d.scissor(e[0],t[3]-e[3]-e[1],e[2],e[3]),d.clearColor(a.r,a.g,a.b,1),a.useBackgroundColor?d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT):d.clear(d.DEPTH_BUFFER_BIT),mat4.identity(i),r.orthographic?(mat4.ortho(i,-.5,.5,-.5,.5,-r.farClipping,r.farClipping),mat4.translate(i,i,[-.5,.5,0]),mat4.scale(i,i,[1/e[2],-1/e[3],1]),mat4.identity(r.matrix),d.disable(d.CULL_FACE)):(mat4.perspective(i,r.fov*Math.PI/180,e[2]/e[3],r.nearClipping,r.farClipping),d.enable(d.CULL_FACE)),c(n,f,a,i,r.matrix,e),a.skyBox&&(d.cullFace(d.FRONT),a.skyBox.scaleX=a.skyBox.scaleY=a.skyBox.scaleZ=r.farClipping,o.sceneRender(d,r.orthographic,[a.skyBox],f,o.renderInfo[s.key]),d.cullFace(d.BACK)),o.sceneRender(d,r.orthographic,h,f,o.renderInfo[s.key]),o.sceneRender(d,r.orthographic,a.children,f,o.renderInfo[s.key])})}}(),RedRenderer.prototype.sceneRender=(a=function(t,e,r,u,c,s,h,f,d){var l,R,M,m,v,p,E,b,g,U,A,_,y,L,T,S,w,I,x,P,G,F,D,N,B,O,C,Y,k,j,X,q,V,z,Z,W,H,Q,J,K,$,tt,et,rt,nt,at,it,ot,ut,ct,st,ht,ft,dt,lt,Rt,Mt,mt,vt,pt,Et,bt,gt,Ut,At,_t,yt,Lt,Tt,St,wt,It,xt,Pt,Gt,Ft,Dt,Nt,Bt,Ot,Ct,Yt,kt,jt,Xt,qt,Vt,zt,Zt,Wt,Ht,Qt,Jt,Kt,$t,te,ee,re,ne,ae,ie,oe=r?-1:1;for(M=Float32Array.BYTES_PER_ELEMENT,ee=3.141592653589793,re=6.283185307179586,ne=1.27323954,ae=.405284735,ie=1.5707963267948966,l=e.length;l--;){for(c.call++,P=(m=e[l]).matrix,G=m.normalMatrix,v=m.geometry,p=m.material,n!=p.program._UUID&&t.useProgram(p.program.webglProgram),n=p.program._UUID,b=p.program.attributeLocation,g=p.program.uniformLocation,U=p.program.systemUniformLocation,S=v.interleaveBuffer,w=v.indexBuffer,E=S.interleaveDefineInfo,F=S._UUID,R=b.length;R--;)A=E[(y=b[R]).name],o!=F&&t.bindBuffer(t.ARRAY_BUFFER,S.webglBuffer),o=F,y&&A&&s[T=y.location]!=A._UUID&&(!y.enabled&&(t.enableVertexAttribArray(T),y.enabled=!0),t.vertexAttribPointer(T,A.size,S.glArrayType,A.normalize,S.stride*M,A.offset*M),s[T]=A._UUID);for(R=g.length;R--;)L=(_=g[R]).location,F=_._UUID,L&&(x=_.renderType,I=p[_.materialPropertyName],D=h[F]==I,"sampler2D"==x||"samplerCube"==x?(N=_.samplerIndex,I?f[N]==I._UUID||(t.activeTexture(t.TEXTURE0+N),t.bindTexture("sampler2D"==x?t.TEXTURE_2D:t.TEXTURE_CUBE_MAP,I.webglTexture),t.uniform1i(L,N),f[N]=I._UUID):0==f[N]||(t.uniform1i(L,N),f[N]=0)):(void 0==I&&RedGLUtil.throwFunc("RedRenderer : Material에 ",_.materialPropertyName,"이 정의 되지않았습니다."),"float"==x?!D&&t[_.renderMethod](L,h[F]=I):"int"==x?!D&&t[_.renderMethod](L,h[F]=I):"vec"==x?!D&&t[_.renderMethod](L,h[F]=I):"mat"==x?t[_.renderMethod](L,!1,I):RedGLUtil.throwFunc("RedRenderer : 처리할수없는 타입입니다.","tRenderType -",x)));P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,B=P,Ut=m.x,At=m.y,_t=m.z,B[12]=B[0]*Ut+B[4]*At+B[8]*_t+B[12],B[13]=B[1]*Ut+B[5]*At+B[9]*_t+B[13],B[14]=B[2]*Ut+B[6]*At+B[10]*_t+B[14],B[15]=B[3]*Ut+B[7]*At+B[11]*_t+B[15],q=m.rotationX,V=m.rotationY,z=m.rotationZ,(te=q%re)<-ee?te+=re:te>ee&&(te-=re),O=(te=te<0?ne*te+ae*te*te:ne*te-ae*te*te)<0?.225*(te*-te-te)+te:.225*(te*te-te)+te,(te=(q+ie)%re)<-ee?te+=re:te>ee&&(te-=re),k=(te=te<0?ne*te+ae*te*te:ne*te-ae*te*te)<0?.225*(te*-te-te)+te:.225*(te*te-te)+te,(te=V%re)<-ee?te+=re:te>ee&&(te-=re),C=(te=te<0?ne*te+ae*te*te:ne*te-ae*te*te)<0?.225*(te*-te-te)+te:.225*(te*te-te)+te,(te=(V+ie)%re)<-ee?te+=re:te>ee&&(te-=re),j=(te=te<0?ne*te+ae*te*te:ne*te-ae*te*te)<0?.225*(te*-te-te)+te:.225*(te*te-te)+te,(te=z%re)<-ee?te+=re:te>ee&&(te-=re),Y=(te=te<0?ne*te+ae*te*te:ne*te-ae*te*te)<0?.225*(te*-te-te)+te:.225*(te*te-te)+te,(te=(z+ie)%re)<-ee?te+=re:te>ee&&(te-=re),X=(te=te<0?ne*te+ae*te*te:ne*te-ae*te*te)<0?.225*(te*-te-te)+te:.225*(te*te-te)+te,Z=B[0],W=B[1],H=B[2],J=B[4],K=B[5],$=B[6],et=B[8],rt=B[9],nt=B[10],lt=j*X,Rt=O*C*X-k*Y,Mt=k*C*X+O*Y,mt=j*Y,vt=O*C*Y+k*X,pt=k*C*Y-O*X,Et=-C,bt=O*j,gt=k*j,B[0]=Z*lt+J*Rt+et*Mt,B[1]=W*lt+K*Rt+rt*Mt,B[2]=H*lt+$*Rt+nt*Mt,B[4]=Z*mt+J*vt+et*pt,B[5]=W*mt+K*vt+rt*pt,B[6]=H*mt+$*vt+nt*pt,B[8]=Z*Et+J*bt+et*gt,B[9]=W*Et+K*bt+rt*gt,B[10]=H*Et+$*bt+nt*gt,Ut=m.scaleX,At=m.scaleY*oe,_t=m.scaleZ,B[0]=B[0]*Ut,B[1]=B[1]*Ut,B[2]=B[2]*Ut,B[3]=B[3]*Ut,B[4]=B[4]*At,B[5]=B[5]*At,B[6]=B[6]*At,B[7]=B[7]*At,B[8]=B[8]*_t,B[9]=B[9]*_t,B[10]=B[10]*_t,B[11]=B[11]*_t,B[12]=B[12],B[13]=B[13],B[14]=B[14],B[15]=B[15],d&&(Z=d[0],W=d[1],H=d[2],Q=d[3],J=d[4],K=d[5],$=d[6],tt=d[7],et=d[8],rt=d[9],nt=d[10],at=d[11],it=d[12],ot=d[13],ut=d[14],ct=d[15],st=P[0],ht=P[1],ft=P[2],dt=P[3],P[0]=st*Z+ht*J+ft*et+dt*it,P[1]=st*W+ht*K+ft*rt+dt*ot,P[2]=st*H+ht*$+ft*nt+dt*ut,P[3]=st*Q+ht*tt+ft*at+dt*ct,st=P[4],ht=P[5],ft=P[6],dt=P[7],P[4]=st*Z+ht*J+ft*et+dt*it,P[5]=st*W+ht*K+ft*rt+dt*ot,P[6]=st*H+ht*$+ft*nt+dt*ut,P[7]=st*Q+ht*tt+ft*at+dt*ct,st=P[8],ht=P[9],ft=P[10],dt=P[11],P[8]=st*Z+ht*J+ft*et+dt*it,P[9]=st*W+ht*K+ft*rt+dt*ot,P[10]=st*H+ht*$+ft*nt+dt*ut,P[11]=st*Q+ht*tt+ft*at+dt*ct,st=P[12],ht=P[13],ft=P[14],dt=P[15],P[12]=st*Z+ht*J+ft*et+dt*it,P[13]=st*W+ht*K+ft*rt+dt*ot,P[14]=st*H+ht*$+ft*nt+dt*ut,P[15]=st*Q+ht*tt+ft*at+dt*ct),t.uniformMatrix4fv(U.uMVMatrix.location,!1,P),U.uNMatrix&&(yt=P[0],Lt=P[1],Tt=P[2],St=P[3],wt=P[4],It=P[5],xt=P[6],Pt=P[7],Gt=P[8],Ft=P[9],Dt=P[10],Nt=P[11],Ot=P[12],Ct=P[13],Yt=P[14],$t=1/($t=(Bt=yt*It-Lt*wt)*(Kt=Dt*(kt=P[15])-Nt*Yt)-(jt=yt*xt-Tt*wt)*(Jt=Ft*kt-Nt*Ct)+(Xt=yt*Pt-St*wt)*(Qt=Ft*Yt-Dt*Ct)+(qt=Lt*xt-Tt*It)*(Ht=Gt*kt-Nt*Ot)-(Vt=Lt*Pt-St*It)*(Wt=Gt*Yt-Dt*Ot)+(zt=Tt*Pt-St*xt)*(Zt=Gt*Ct-Ft*Ot)),G[0]=(It*Kt-xt*Jt+Pt*Qt)*$t,G[1]=(-Lt*Kt+Tt*Jt-St*Qt)*$t,G[2]=(Ct*zt-Yt*Vt+kt*qt)*$t,G[3]=(-Ft*zt+Dt*Vt-Nt*qt)*$t,G[4]=(-wt*Kt+xt*Ht-Pt*Wt)*$t,G[5]=(yt*Kt-Tt*Ht+St*Wt)*$t,G[6]=(-Ot*zt+Yt*Xt-kt*jt)*$t,G[7]=(Gt*zt-Dt*Xt+Nt*jt)*$t,G[8]=(wt*Jt-It*Ht+Pt*Zt)*$t,G[9]=(-yt*Jt+Lt*Ht-St*Zt)*$t,G[10]=(Ot*Vt-Ct*Xt+kt*Bt)*$t,G[11]=(-Gt*Vt+Ft*Xt-Nt*Bt)*$t,G[12]=(-wt*Qt+It*Wt-xt*Zt)*$t,G[13]=(yt*Qt-Lt*Wt+Tt*Zt)*$t,G[14]=(-Ot*qt+Ct*jt-Yt*Bt)*$t,G[15]=(Gt*qt-Ft*jt+Dt*Bt)*$t,W=G[1],H=G[2],Q=G[3],$=G[6],tt=G[7],at=G[11],G[1]=G[4],G[2]=G[8],G[3]=G[12],G[4]=W,G[6]=G[9],G[7]=G[13],G[8]=H,G[9]=$,G[11]=G[14],G[12]=Q,G[13]=tt,G[14]=at,t.uniformMatrix4fv(U.uNMatrix.location,!1,G)),w?(i!=w._UUID&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,w.webglBuffer),t.drawElements(m.drawMode,w.pointNum,w.glArrayType,0),i=w._UUID):t.drawArrays(m.drawMode,0,S.pointNum),m.children.length&&a(t,m.children,r,u,c,s,h,f,P)}},function(t,e,r,n,i){a(t,r,e,n,i,this.cacheAttrInfo,this.cacheUniformInfo,this.cacheTextureInfo)}),Object.freeze(RedRenderer)}(),function(){var t,e;t=function(t,e){t.activeTexture(t.TEXTURE0+0),t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,2,2,0,t.LUMINANCE,t.UNSIGNED_BYTE,new Uint8Array([128,64,0,192])),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.bindTexture(t.TEXTURE_2D,null)},e=function(e,r,n){var a,i,o,u;return o=function(t){t.removeEventListener("error",a),t.removeEventListener("load",i)},a=function(){var t="couldn't load image: "+n;RedGLUtil.throwFunc(t),o(this)},i=function(){o(this),e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},t(e,r),(u=new Image).crossOrigin="anonymous",u.src=n,u.addEventListener("error",a),u.addEventListener("load",i),u},(RedBitmapTexture=function(t,r,n){var a;if(!(this instanceof RedBitmapTexture))return new RedBitmapTexture(t,r,n);t instanceof RedGL||RedGLUtil.throwFunc("RedBitmapTexture : RedGL Instance만 허용됩니다."),a=t.gl,this.webglTexture=a.createTexture(),this._UUID=RedGL.makeUUID(),e(a,this.webglTexture,r),Object.seal(this)}).prototype={},Object.freeze(RedBitmapTexture)}(),function(){var t;t={},(RedView=function(e,r,n){if(t[e]){if(!r&&!n)return t[e];RedGLUtil.throwFunc(e,"는 이미 생성된 RedView key입니다.")}if(!(this instanceof RedView))return new RedView(e,r,n);"string"!=typeof e&&RedGLUtil.throwFunc("key : 문자열만 허용"),r||n||RedGLUtil.throwFunc("존재하지 않는 key입니다."),!r||r instanceof RedScene||RedGLUtil.throwFunc("RedScene Instance만 허용"),!n||n instanceof RedCamera||RedGLUtil.throwFunc("RedCamera Instance만 허용"),this.key=e,this.scene=r,this.camera=n,this._width="100%",this._height="100%",this._x=0,this._y=0,t[e]=this,Object.seal(this)}).prototype={setSize:function(t,e){this._width=void 0!=t?t:"100%",this._height=void 0!=e?e:"100%"},setLocation:function(t,e){this._x=void 0!=t?t:0,this._y=void 0!=e?e:0}},Object.freeze(RedView)}(),(RedWorld=function(){if(!(this instanceof RedWorld))return new RedWorld;this._viewList=[],this._viewMap={},this._UUID=RedGL.makeUUID(),Object.seal(this)}).prototype={addView:function(t){return t instanceof RedView||RedGLUtil.throwFunc("RedView Instance만 허용함."),this._viewMap[t.key]=t,this._viewList.push(t),this},getView:function(t){return this._viewMap[t]},delView:function(t){var e,r;return(e=this._viewMap[t])&&(r=this._viewList.indexOf(e),this._viewList.splice(r,1),delete this._viewMap[t]),this},hasView:function(t){return!!this._viewMap[t]},getViewList:function(){return this._viewList.concat()}},Object.freeze(RedWorld),function(){var t;(RedScene=function(t){if(!(this instanceof RedScene))return new RedScene(t);this.r=0,this.g=0,this.b=0,this.setBackgroundColor(t||"#000"),this.useBackgroundColor=!0,this.children=[],this.lightInfo={RedAmbientLight:null,RedDirectionalLight:[],RedOmniLight:[]},this.skyBox=null,this._UUID=RedGL.makeUUID(),Object.seal(this)}).prototype={addLight:function(t){switch(t instanceof RedBaseLight||RedGLUtil.throwFunc("RedBaseLight 확장객체만 가능"),t.type){case"RedAmbientLight":this.lightInfo[t.type]=t;break;case"RedDirectionalLight":case"RedOmniLight":this.lightInfo[t.type].push(t)}},setSkyBox:function(t){this.skyBox=t},removeLight:function(){}},RedScene.prototype.setBackgroundColor=function(e){e=e||"#000",t=RedGLUtil.hexToRGB.call(this,e),this.r=t[0],this.g=t[1],this.b=t[2]},RedGLUtil.extendsProto(RedScene,RedBaseContainer),Object.freeze(RedScene)}(),function(){var t;(RedCamera=function(){if(!(this instanceof RedCamera))return new RedCamera;this.x=this.y=this.z=0,this.fov=45,this.nearClipping=.1,this.farClipping=1e5,this.orthographic=!1,this.matrix=mat4.create(),this._UUID=RedGL.makeUUID()}).prototype={updateMatrix:function(){Math.PI;return function(){}}(),lookAt:(t=new Float32Array([0,1,0]),function(e,r,n){mat4.lookAt(this.matrix,[this.x,this.y,this.z],[e,r,n],t)})},RedGLUtil.extendsProto(RedCamera,RedBaseObject3D),Object.freeze(RedCamera)}();console.log('LOGIN Release. last update(2018-03-29 16:53:44)');