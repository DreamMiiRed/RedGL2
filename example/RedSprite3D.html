<html>

<head>
    <meta charset="UTF-8">
    <title>RedSprite3D</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi"
    />
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
    <script src="dat.gui.min.js"></script>
    <script src="baseTestUI.js"></script>
    <script src="../release/RedGL.min.js"></script>
</head>

<body>
    <canvas id="test" style="border: none;background:red"></canvas>
    <script>
        var testUI;
        document.getElementById('test')
        RedGL(document.getElementById('test'), function (v) {
            if (v) {
                console.log('초기화 성공!')
                var tWorld, tScene, tCamera, tRenderer;

                // 월드 생성
                this['world'] = tWorld = RedWorld();

                // 씬 생성
                tScene = RedScene();

                // 카메라 생성
                tCamera = RedCamera();

                // 렌더러 생성
                tRenderer = RedRenderer();

                // 뷰생성 및 적용
                tWorld.addView(RedView('test', tScene, tCamera));

                // 그리드 설정
                tScene['grid'] = RedGrid(this)

                // Box 설정
                var i = 10
                while (i--) {
                    var tSprite3D = RedSprite3D(this, RedBitmapMaterial(this, RedBitmapTexture(this, '../asset/alphaTest.png')))
                    tSprite3D.x = Math.sin(Math.PI * 2 / 10 * i) * 3
                    tSprite3D.y = Math.cos(Math.PI * 2 / 10 * i) * 3
                    tScene.addChild(tSprite3D)

                }
                // 렌더시작
                tRenderer.start(this, function (time) {
                    tCamera.x = Math.sin(time / 1500) * 10
                    tCamera.y = Math.cos(time / 1500) * 10
                    tCamera.z = Math.cos(time / 1500) * 10 + Math.sin(time / 1500) * 10

                    tCamera.lookAt(0, 0, 0)
                })

                // 렌더 디버거 활성화
                tRenderer['renderDebuger']['visible'] = true

                // 
                testUI(this, tCamera, tScene)
            } else {
                console.log('초기화 실패!')
            }
        })
        testUI = function (redGL, tCamera, tScene) {
            console.log('test')
            var gui = new baseTestUI(redGL)
            gui.initRedGL()
            gui.initCamera(tCamera)
            gui.initScene(tScene)
        }
    </script>
</body>

</html>